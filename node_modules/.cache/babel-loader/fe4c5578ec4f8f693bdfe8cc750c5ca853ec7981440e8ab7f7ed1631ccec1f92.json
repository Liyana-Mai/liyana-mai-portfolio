{"ast":null,"code":"import React,{useState,useEffect,useMemo}from\"react\";import{loadStripe}from'@stripe/stripe-js';import{CheckoutProvider}from'@stripe/react-stripe-js';import{BrowserRouter as Router,Routes,Route,Navigate}from\"react-router-dom\";import CheckoutForm from\"./CheckoutForm\";import Home from\"./Home\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const stripePromise=loadStripe(\"pk_test_51RYpwq2aC06LT0QhgGTDgPi01NdFBJLAQhSGq09Vyjiv7YaZdOocxGziAVFsMskXEkjHZW1XItAPGUwEtRcY6ZnD001CDDCa88\");const Return=()=>{const[status,setStatus]=useState(null);const[customerEmail,setCustomerEmail]=useState('');useEffect(()=>{const urlParams=new URLSearchParams(window.location.search);const sessionId=urlParams.get('session_id');fetch(\"/session-status?session_id=\".concat(sessionId)).then(res=>res.json()).then(data=>{setStatus(data.status);setCustomerEmail(data.customer_email);});},[]);if(status==='open'){return/*#__PURE__*/_jsx(Navigate,{to:\"/checkout\"});}if(status==='complete'){return/*#__PURE__*/_jsx(\"section\",{id:\"success\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"We appreciate your business! A confirmation email will be sent to \",customerEmail,\".\",/*#__PURE__*/_jsx(\"br\",{}),\"If you have any questions, please email \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:orders@example.com\",children:\"orders@example.com\"}),\".\"]})});}return null;};const App=()=>{const promise=useMemo(()=>{return fetch('/create-checkout-session',{method:'POST'}).then(res=>res.json()).then(data=>data.clientSecret);},[]);const appearance={theme:'stripe'};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(CheckoutProvider,{stripe:stripePromise,options:{fetchClientSecret:()=>promise,elementsOptions:{appearance}},children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(CheckoutForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/return\",element:/*#__PURE__*/_jsx(Return,{})})]})})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useMemo","loadStripe","CheckoutProvider","BrowserRouter","Router","Routes","Route","Navigate","CheckoutForm","Home","jsx","_jsx","jsxs","_jsxs","stripePromise","Return","status","setStatus","customerEmail","setCustomerEmail","urlParams","URLSearchParams","window","location","search","sessionId","get","fetch","concat","then","res","json","data","customer_email","to","id","children","href","App","promise","method","clientSecret","appearance","theme","stripe","options","fetchClientSecret","elementsOptions","path","element"],"sources":["C:/Users/liyan/OneDrive/Desktop/liyana-mai/client/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { CheckoutProvider } from '@stripe/react-stripe-js';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes,\r\n  Route,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\nimport Home from \"./Home\";\r\n\r\nconst stripePromise = loadStripe(\"pk_test_51RYpwq2aC06LT0QhgGTDgPi01NdFBJLAQhSGq09Vyjiv7YaZdOocxGziAVFsMskXEkjHZW1XItAPGUwEtRcY6ZnD001CDDCa88\");\r\n\r\nconst Return = () => {\r\n  const [status, setStatus] = useState(null);\r\n  const [customerEmail, setCustomerEmail] = useState('');\r\n\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const sessionId = urlParams.get('session_id');\r\n\r\n    fetch(`/session-status?session_id=${sessionId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setStatus(data.status);\r\n        setCustomerEmail(data.customer_email);\r\n      });\r\n  }, []);\r\n\r\n  if (status === 'open') {\r\n    return <Navigate to=\"/checkout\" />;\r\n  }\r\n\r\n  if (status === 'complete') {\r\n    return (\r\n      <section id=\"success\">\r\n        <p>\r\n          We appreciate your business! A confirmation email will be sent to {customerEmail}.<br />\r\n          If you have any questions, please email <a href=\"mailto:orders@example.com\">orders@example.com</a>.\r\n        </p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nconst App = () => {\r\n  const promise = useMemo(() => {\r\n    return fetch('/create-checkout-session', { method: 'POST' })\r\n      .then(res => res.json())\r\n      .then(data => data.clientSecret);\r\n  }, []);\r\n\r\n  const appearance = {\r\n    theme: 'stripe',\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <CheckoutProvider\r\n        stripe={stripePromise}\r\n        options={{\r\n          fetchClientSecret: () => promise,\r\n          elementsOptions: { appearance },\r\n        }}\r\n      >\r\n        <Routes>\r\n          <Route path=\"/\" element={<Home />} />\r\n          <Route path=\"/checkout\" element={<CheckoutForm />} />\r\n          <Route path=\"/return\" element={<Return />} />\r\n        </Routes>\r\n      </CheckoutProvider>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}