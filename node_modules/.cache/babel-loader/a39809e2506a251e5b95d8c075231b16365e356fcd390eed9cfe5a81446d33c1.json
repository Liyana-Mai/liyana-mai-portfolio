{"ast":null,"code":"import React,{useState}from\"react\";import{PaymentElement,useCheckout}from'@stripe/react-stripe-js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const validateEmail=async(email,checkout)=>{const updateResult=await checkout.updateEmail(email);const isValid=updateResult.type!==\"error\";return{isValid,message:!isValid?updateResult.error.message:null};};const EmailInput=_ref=>{let{email,setEmail,error,setError}=_ref;const checkout=useCheckout();const handleBlur=async()=>{if(!email){return;}const{isValid,message}=await validateEmail(email,checkout);if(!isValid){setError(message);}};const handleChange=e=>{setError(null);setEmail(e.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"text\",value:email,onChange:handleChange,onBlur:handleBlur,placeholder:\"you@example.com\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{id:\"email-errors\",children:error})]});};const CheckoutForm=()=>{const checkout=useCheckout();const[email,setEmail]=useState('');const[emailError,setEmailError]=useState(null);const[message,setMessage]=useState(null);const[isLoading,setIsLoading]=useState(false);const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);const{isValid,message}=await validateEmail(email,checkout);if(!isValid){setEmailError(message);setMessage(message);setIsLoading(false);return;}const confirmResult=await checkout.confirm();// This point will only be reached if there is an immediate error when\n// confirming the payment. Otherwise, your customer will be redirected to\n// your `return_url`. For some payment methods like iDEAL, your customer will\n// be redirected to an intermediate site first to authorize the payment, then\n// redirected to the `return_url`.\nif(confirmResult.type==='error'){setMessage(confirmResult.error.message);}setIsLoading(false);};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(EmailInput,{email:email,setEmail:setEmail,error:emailError,setError:setEmailError}),/*#__PURE__*/_jsx(\"h4\",{children:\"Payment\"}),/*#__PURE__*/_jsx(PaymentElement,{id:\"payment-element\"}),/*#__PURE__*/_jsx(\"button\",{disabled:isLoading,id:\"submit\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}):\"Pay \".concat(checkout.total.total.amount,\" now\")}),message&&/*#__PURE__*/_jsx(\"div\",{id:\"payment-message\",children:message})]});};export default CheckoutForm;","map":{"version":3,"names":["React","useState","PaymentElement","useCheckout","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","validateEmail","email","checkout","updateResult","updateEmail","isValid","type","message","error","EmailInput","_ref","setEmail","setError","handleBlur","handleChange","e","target","value","children","id","onChange","onBlur","placeholder","CheckoutForm","emailError","setEmailError","setMessage","isLoading","setIsLoading","handleSubmit","preventDefault","confirmResult","confirm","onSubmit","disabled","className","concat","total","amount"],"sources":["C:/Users/liyan/OneDrive/Desktop/liyana-mai/client/src/CheckoutForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  PaymentElement,\r\n  useCheckout,\r\n} from '@stripe/react-stripe-js';\r\n\r\nconst validateEmail = async (email, checkout) => {\r\n  const updateResult = await checkout.updateEmail(email);\r\n  const isValid = updateResult.type !== \"error\";\r\n\r\n  return { isValid, message: !isValid ? updateResult.error.message : null };\r\n}\r\n\r\nconst EmailInput = ({ email, setEmail, error, setError }) => {\r\n  const checkout = useCheckout();\r\n\r\n  const handleBlur = async () => {\r\n    if (!email) {\r\n      return;\r\n    }\r\n\r\n    const { isValid, message } = await validateEmail(email, checkout);\r\n    if (!isValid) {\r\n      setError(message);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setError(null);\r\n    setEmail(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <label>\r\n        Email\r\n        <input\r\n          id=\"email\"\r\n          type=\"text\"\r\n          value={email}\r\n          onChange={handleChange}\r\n          onBlur={handleBlur}\r\n          placeholder=\"you@example.com\"\r\n        />\r\n      </label>\r\n      {error && <div id=\"email-errors\">{error}</div>}\r\n    </>\r\n  );\r\n};\r\n\r\nconst CheckoutForm = () => {\r\n  const checkout = useCheckout();\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [emailError, setEmailError] = useState(null);\r\n  const [message, setMessage] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    setIsLoading(true);\r\n\r\n    const { isValid, message } = await validateEmail(email, checkout);\r\n    if (!isValid) {\r\n      setEmailError(message);\r\n      setMessage(message);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const confirmResult = await checkout.confirm();\r\n\r\n    // This point will only be reached if there is an immediate error when\r\n    // confirming the payment. Otherwise, your customer will be redirected to\r\n    // your `return_url`. For some payment methods like iDEAL, your customer will\r\n    // be redirected to an intermediate site first to authorize the payment, then\r\n    // redirected to the `return_url`.\r\n    if (confirmResult.type === 'error') {\r\n      setMessage(confirmResult.error.message);\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <EmailInput\r\n        email={email}\r\n        setEmail={setEmail}\r\n        error={emailError}\r\n        setError={setEmailError}\r\n      />\r\n      <h4>Payment</h4>\r\n      <PaymentElement id=\"payment-element\" />\r\n      <button disabled={isLoading} id=\"submit\">\r\n        {isLoading ? (\r\n          <div className=\"spinner\"></div>\r\n        ) : (\r\n          `Pay ${checkout.total.total.amount} now`\r\n        )}\r\n      </button>\r\n      {/* Show any error or success messages */}\r\n      {message && <div id=\"payment-message\">{message}</div>}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default CheckoutForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}